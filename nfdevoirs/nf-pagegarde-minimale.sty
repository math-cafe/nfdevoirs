% ============================================================================
% nf-pagegarde-minimale.sty - Page de garde minimaliste pour nfdevoirs
% Page de garde compacte pour contrôles courts (CONT)
% ============================================================================

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{nfdevoirs/nf-pagegarde-minimale}[2025/10/06 Page garde minimale nfdevoirs]

% ============================================================================
% PACKAGES REQUIS
% ============================================================================
\RequirePackage{tcolorbox}
\RequirePackage{etoolbox}
\RequirePackage{fontawesome5}

% ============================================================================
% PAGE DE GARDE MINIMALISTE (pour contrôles courts)
% ============================================================================
\newcommand{\nfpagegardeminimale}{%
    \thispagestyle{empty}%

    % Bandeau simplifié (sans logo)
    \begin{center}
        \begin{minipage}[c]{0.33\textwidth}
            % GAUCHE : Établissement (sans logo)
            \raggedright
            \expandafter\ifstrempty\expandafter{\@nfetablissement}{}{%
                {\textbf{\@nfetablissement}}%
            }%
        \end{minipage}%
        \begin{minipage}[c]{0.33\textwidth}
            % CENTRE : Année scolaire
            \centering
            \expandafter\ifstrempty\expandafter{\@nfanscol}{}{%
                {\textbf{Année scolaire \nfformatanscol{\@nfanscol}}}%
            }%
        \end{minipage}%
        \begin{minipage}[c]{0.33\textwidth}
            % DROITE : Auteur + Matière
            \raggedleft
            \expandafter\ifstrempty\expandafter{\@nfauteur}{%
            \expandafter\ifstrempty\expandafter{\@nfmatiere}{}{%
                {\@nfmatiere}%
            }%
            }{%
            {\@nfauteur}%
            \expandafter\ifstrempty\expandafter{\@nfmatiere}{}{%
            \\[0.1cm]{\@nfmatiere}%
            }%
            }%
        \end{minipage}
    \end{center}

    \vspace{0.3cm}

    % Titre simple (sans ligne de séparation)
    \begin{center}
        {\Large\bfseries\color{nfcolpartie}\@nftypedevoir\ : \@title}
    \end{center}

    \vspace{0.3cm}

    % Nom et classe sur une ligne
    \begin{center}
        \begin{minipage}{0.45\textwidth}
            {\textbf{Nom :} \@nfnom}
        \end{minipage}%
        \hfill
        \begin{minipage}{0.45\textwidth}
            \raggedleft
            \expandafter\ifstrempty\expandafter{\@nfclasse}{}{{\textbf{Classe :} \@nfclasse}}
        \end{minipage}
    \end{center}

    \vspace{0.3cm}

    % Section Informations compacte
    \begin{center}
        \expandafter\ifstrempty\expandafter{\@nfduree}{}{%
            \textbf{\color{nfcolpartie}\faClock\ \@nfduree} \quad
        }%
        \expandafter\ifstrequal\expandafter{\@nfbareme}{false}{}{%
            \textbf{\color{nfcolpartie}\faTrophy\ \nftotalpts\ points}%
            \ifnum\nftotalbonus>0
                \ + \textbf{\nftotalbonus\ bonus}%
            \fi%
            \expandafter\ifstrempty\expandafter{\@nfdate}{}{\ \quad}%
        }%
        \expandafter\ifstrempty\expandafter{\@nfdate}{}{\textbf{\color{nfcolpartie}\faCalendar\ \@nfdate}}
    \end{center}

    \vspace{0.3cm}

    % Boîte pour la note (2cm de haut)
    \begin{tcolorbox}[
            enhanced,
            colback=white,
            colframe=nfcolpartie,
            boxrule=1.5pt,
            arc=2pt,
            left=10pt,
            right=10pt,
            top=8pt,
            bottom=8pt,
            height=2cm,
        ]
        \textbf{\color{nfcolpartie}Note et observations :}
    \end{tcolorbox}

    \vspace{0.3cm}

    % Trait séparateur
    \begin{center}
        {\color{nfcolpartie}\rule{0.8\textwidth}{1pt}}
    \end{center}

    \vspace{0.3cm}
    % Pas de \newpage - le devoir commence directement après
}

\endinput